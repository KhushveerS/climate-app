<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0b3d91">
  <title>Climate & Weather</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="manifest" href="manifest.webmanifest">
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  >
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <span class="logo" aria-hidden="true">üå§Ô∏è</span>
      <h1>Climate & Weather</h1>
    </div>
    <div class="actions">
      <button id="use-location" class="primary">Use my location</button>
      <form id="search-form" autocomplete="off" role="search" aria-label="Search city">
        <input id="search-input" type="search" placeholder="Search city or address" aria-label="Search city or address">
        <button type="submit">Search</button>
      </form>
      <button id="disaster-info" class="disaster-btn">Disaster Info</button>
      <button id="advisory-info" class="advisory-btn">Travel Advisory</button>
      <button id="ai-travel-advisor" class="ai-advisor-btn">AI Travel Advisor</button>
      <button id="weather-charts" class="charts-btn">Weather Charts</button>
      <div id="recent-locations" class="recent-locations"></div>
    </div>
  </header>

  <main class="container">
    <section class="panel" id="location-panel">
      <h2 class="panel-title">Location</h2>
      <div id="location-name" class="location-name">‚Äî</div>
      <div id="coords" class="coords" aria-live="polite"></div>
    </section>

    <section class="panel" id="current-panel">
      <h2 class="panel-title">Current Conditions</h2>
      <div class="current-grid">
        <div class="current-main">
          <div id="current-temp" class="temp">‚Äî</div>
          <div id="current-summary" class="summary">‚Äî</div>
        </div>
        <ul class="metrics">
          <li><span>Feels like</span><strong id="apparent-temp">‚Äî</strong></li>
          <li><span>Humidity</span><strong id="humidity">‚Äî</strong></li>
          <li><span>Wind</span><strong id="wind">‚Äî</strong></li>
          <li><span>Precip prob</span><strong id="precip-prob">‚Äî</strong></li>
          <li><span>UV Index</span><strong id="uv">‚Äî</strong></li>
          <li><span>US AQI</span><strong id="aqi">‚Äî</strong></li>
          <li><span>PM2.5</span><strong id="pm25">‚Äî</strong></li>
        </ul>
      </div>
    </section>

    <section class="panel" id="unique-panel">
      <h2 class="panel-title">Insights</h2>
      <div class="insights">
        <div class="insight">
          <h3>Commute Comfort Score</h3>
          <div class="score" id="commute-score">‚Äî</div>
          <p id="commute-notes" class="notes">‚Äî</p>
        </div>
        <div class="insight">
          <h3>AC Efficiency Advisor</h3>
          <div class="score small" id="ac-advice">‚Äî</div>
          <p id="ac-notes" class="notes">‚Äî</p>
        </div>
      </div>
    </section>

    <section class="panel" id="energy-panel">
      <h2 class="panel-title">Energy Insights</h2>
      <div class="energy-insights">
        <div class="energy-card">
          <h3>üå°Ô∏è Heating/Cooling Needs</h3>
          <div id="heating-cooling-status" class="energy-status">‚Äî</div>
          <div id="heating-cooling-details" class="energy-details">‚Äî</div>
          <div id="heating-cooling-recommendations" class="energy-recommendations">‚Äî</div>
        </div>
        <div class="energy-card">
          <h3>‚òÄÔ∏è Solar Potential</h3>
          <div id="solar-potential-status" class="energy-status">‚Äî</div>
          <div id="solar-potential-details" class="energy-details">‚Äî</div>
          <div id="solar-recommendations" class="energy-recommendations">‚Äî</div>
        </div>
        <div class="energy-card">
          <h3>üí∞ Energy Cost Estimates</h3>
          <div id="energy-cost-status" class="energy-status">‚Äî</div>
          <div id="energy-cost-details" class="energy-details">‚Äî</div>
          <div id="energy-cost-breakdown" class="energy-recommendations">‚Äî</div>
        </div>
      </div>
    </section>

    <section class="panel" id="hourly-panel">
      <h2 class="panel-title">Next 24h</h2>
      <div id="hourly" class="hourly"></div>
    </section>

    <section class="panel" id="map-panel">
      <h2 class="panel-title">Map ‚Äì Click to inspect</h2>
      <div id="map" aria-label="Weather map"></div>
      <div class="time-slider">
        <label for="time-slider" class="panel-title">Hour</label>
        <input id="time-slider" type="range" min="0" max="23" step="1" value="0" />
        <span id="time-label" aria-live="polite">Now</span>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    
  </footer>

  <!-- Disaster Information Modal -->
  <div id="disaster-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Active Disasters & Events</h2>
        <span class="close" id="close-modal">&times;</span>
      </div>
      <div class="modal-body">
        <div class="disaster-section">
          <h3>Earthquakes <span class="badge bad">USGS</span></h3>
          <div id="earthquakes-list" class="disaster-list">
            <p>Loading earthquake data...</p>
          </div>
        </div>
        <div class="disaster-section">
          <h3>Natural Events <span class="badge warn">NASA EONET</span></h3>
          <div id="events-list" class="disaster-list">
            <p>Loading natural events data...</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Travel Advisory Modal -->
  <div id="advisory-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Government Travel Advisories</h2>
        <span class="close" id="close-advisory-modal">&times;</span>
      </div>
      <div class="modal-body">
        <div class="advisory-section">
          <h3>Select Country/Region</h3>
          <select id="country-select" class="country-select">
            <option value="">Select a country...</option>
            <option value="IN">India</option>
            <option value="US">United States</option>
            <option value="CA">Canada</option>
            <option value="GB">United Kingdom</option>
            <option value="AU">Australia</option>
            <option value="JP">Japan</option>
            <option value="DE">Germany</option>
            <option value="FR">France</option>
          </select>
          <button id="get-advisory" class="primary">Get Advisory</button>
        </div>
        <div class="advisory-section">
          <h3>Advisory Information</h3>
          <div id="advisory-content" class="advisory-content">
            <p>Select a country to view government travel advisories.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- AI Travel Advisor Modal -->
  <div id="ai-advisor-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>AI Travel Advisor</h2>
        <span class="close" id="close-ai-advisor-modal">&times;</span>
      </div>
      <div class="modal-body">
        <div class="ai-advisor-section">
          <h3>Ask for Travel Recommendations</h3>
          <textarea id="ai-advisor-prompt" class="ai-prompt-input" placeholder="Describe your travel plans, preferences, or ask for recommendations..."></textarea>
          <button id="get-ai-advice" class="primary">Get AI Advice</button>
        </div>
        <div class="ai-advisor-section">
          <h3>Travel Recommendations</h3>
          <div id="ai-advisor-response" class="ai-advisor-response">
            <p>Enter your travel query to get personalized AI-powered recommendations.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Weather Charts Modal -->
  <div id="weather-charts-modal" class="modal">
    <div class="modal-content" style="max-width: 95%; max-height: 95vh; overflow-y: auto;">
      <div class="modal-header">
        <h2>Historical Weather Charts & Patterns</h2>
        <span class="close" id="close-charts-modal">&times;</span>
      </div>
      <div class="modal-body">
        <div class="charts-controls" style="margin-bottom: 20px; padding: 15px; background: #f5f5f5; border-radius: 8px;">
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px;">
            <div>
              <label for="charts-location" style="display: block; margin-bottom: 5px; font-weight: bold;">Location:</label>
              <input type="text" id="charts-location" placeholder="City or coordinates" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
            <div>
              <label for="charts-year" style="display: block; margin-bottom: 5px; font-weight: bold;">Year:</label>
              <select id="charts-year" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <option value="2024">2024</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <option value="2021">2021</option>
                <option value="2020">2020</option>
              </select>
            </div>
            <div>
              <label for="charts-compare-year" style="display: block; margin-bottom: 5px; font-weight: bold;">Compare with:</label>
              <select id="charts-compare-year" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <option value="">None (single year)</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <option value="2021">2021</option>
                <option value="2020">2020</option>
              </select>
            </div>
            <div>
              <label for="charts-type" style="display: block; margin-bottom: 5px; font-weight: bold;">Chart Type:</label>
              <select id="charts-type" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <option value="temperature">Temperature</option>
                <option value="rainfall">Rainfall</option>
                <option value="wind">Wind Patterns</option>
                <option value="all">All Charts</option>
              </select>
            </div>
          </div>
          <button id="load-charts" class="primary" style="width: 100%; padding: 12px; font-size: 16px;">Load Weather Charts</button>
        </div>
        <div id="charts-container" style="display: grid; gap: 20px;">
          <p style="text-align: center; color: #666;">Enter a location and click "Load Weather Charts" to view historical weather patterns.</p>
        </div>
      </div>
    </div>
  </div>

  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
    defer
  ></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="script.js" defer></script>
  <script src="init.js" defer></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js').catch(() => {});
      });
    }
  </script>
</body>
</html>

